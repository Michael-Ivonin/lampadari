"use strict";

document.addEventListener("DOMContentLoaded", function () {
  /* Modal */
  (function showHideModal() {
    var body = document.body;
    var trigger = body.querySelector(".trigger");
    var modal = body.querySelector(".modal-bg");
    var close = modal.querySelector(".modal__close");
    trigger.addEventListener("click", function (event) {
      event.preventDefault();
      modal.classList.toggle("modal-bg_open");
      body.classList.toggle("body_fixed");
    });
    modal.addEventListener("click", function (event) {
      if (event.target === modal) {
        modal.classList.toggle("modal-bg_open");
        body.classList.toggle("body_fixed");
      }
    });
    close.addEventListener("click", function (event) {
      event.preventDefault();
      modal.classList.toggle("modal-bg_open");
      body.classList.toggle("body_fixed");
    });
  })();
  /* Polyfill the Array.from() */


  if (!Array.from) {
    Array.from = function () {
      var toStr = Object.prototype.toString;

      var isCallable = function isCallable(fn) {
        return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
      };

      var toInteger = function toInteger(value) {
        var number = Number(value);

        if (isNaN(number)) {
          return 0;
        }

        if (number === 0 || !isFinite(number)) {
          return number;
        }

        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
      };

      var maxSafeInteger = Math.pow(2, 53) - 1;

      var toLength = function toLength(value) {
        var len = toInteger(value);
        return Math.min(Math.max(len, 0), maxSafeInteger);
      }; // The length property of the from method is 1.


      return function from(arrayLike
      /*, mapFn, thisArg */
      ) {
        // 1. Let C be the this value.
        var C = this; // 2. Let items be ToObject(arrayLike).

        var items = Object(arrayLike); // 3. ReturnIfAbrupt(items).

        if (arrayLike == null) {
          throw new TypeError('Array.from requires an array-like object - not null or undefined');
        } // 4. If mapfn is undefined, then let mapping be false.


        var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
        var T;

        if (typeof mapFn !== 'undefined') {
          // 5. else
          // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.
          if (!isCallable(mapFn)) {
            throw new TypeError('Array.from: when provided, the second argument must be a function');
          } // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.


          if (arguments.length > 2) {
            T = arguments[2];
          }
        } // 10. Let lenValue be Get(items, "length").
        // 11. Let len be ToLength(lenValue).


        var len = toLength(items.length); // 13. If IsConstructor(C) is true, then
        // 13. a. Let A be the result of calling the [[Construct]] internal method
        // of C with an argument list containing the single item len.
        // 14. a. Else, Let A be ArrayCreate(len).

        var A = isCallable(C) ? Object(new C(len)) : new Array(len); // 16. Let k be 0.

        var k = 0; // 17. Repeat, while k < lenâ€¦ (also steps a - h)

        var kValue;

        while (k < len) {
          kValue = items[k];

          if (mapFn) {
            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
          } else {
            A[k] = kValue;
          }

          k += 1;
        } // 18. Let putStatus be Put(A, "length", len, true).


        A.length = len; // 20. Return A.

        return A;
      };
    }();
  }
  /* Slider */


  function Slider(element, duration, DisplayedSlide) {
    var slider = document.querySelector(element),
        list = slider.querySelector(".slider__list"),
        slideWidth = -100,
        dots = slider.querySelector(".slider__dots");
    var selectedDot,
        isDisabled = false;
    list.style.marginLeft = "".concat((DisplayedSlide - 1) * slideWidth, "vw");

    function highlight(item) {
      if (selectedDot) {
        selectedDot.classList.toggle("slider__dot_active");
      }

      selectedDot = item;
      selectedDot.classList.toggle("slider__dot_active");
    }

    highlight(dots.children[DisplayedSlide - 1]);

    function animate(_ref) {
      var _ref$duration = _ref.duration,
          duration = _ref$duration === void 0 ? 250 : _ref$duration,
          timing = _ref.timing,
          draw = _ref.draw;
      var start = performance.now();
      requestAnimationFrame(function animate(time) {
        var timeFraction = (time - start) / duration;
        if (timeFraction > 1) timeFraction = 1;
        var progress = timing(timeFraction);
        draw(progress);

        if (timeFraction < 1) {
          requestAnimationFrame(animate);
        } else {
          isDisabled = false;
        }
      });
    }

    function moveRight(multiplier, previous) {
      animate({
        duration: duration,
        timing: function timing(timeFraction) {
          return timeFraction;
        },
        draw: function draw(progress) {
          list.style.marginLeft = "".concat(progress * (multiplier * slideWidth) + previous * slideWidth, "vw");
        }
      });
    }

    function moveLeft(multiplier, previous) {
      animate({
        duration: duration,
        timing: function timing(timeFraction) {
          return timeFraction;
        },
        draw: function draw(progress) {
          list.style.marginLeft = "".concat(progress * (multiplier * slideWidth) + previous * slideWidth, "vw");
        }
      });
    }

    dots.addEventListener("click", function (event) {
      var target = event.target;
      if (target.tagName !== "LI") return false;
      if (target === selectedDot) return false;
      if (isDisabled) return false;
      isDisabled = true;
      var next = Array.from(dots.children).indexOf(target);
      var previous = Array.from(dots.children).indexOf(selectedDot);
      var multiplier = next - previous;

      if (multiplier > 0) {
        moveLeft(multiplier, previous);
      }

      if (multiplier < 0) {
        moveRight(multiplier, previous);
      }

      highlight(target);
    });
  }

  var carousel = new Slider(".slider", 500, 2);
  /* Bottom box */

  (function showHideBottomBox() {
    var bottomBox = document.querySelector(".bottom-box");
    var buttonOpenBox = bottomBox.querySelector(".bottom-box__button");
    buttonOpenBox.addEventListener("click", function () {
      buttonOpenBox.firstElementChild.classList.toggle("bottom-box__icon-arrow_down");
      bottomBox.classList.toggle("bottom-box_visible");
    });
  })();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dIaWRlTW9kYWwiLCJib2R5IiwidHJpZ2dlciIsInF1ZXJ5U2VsZWN0b3IiLCJtb2RhbCIsImNsb3NlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRhcmdldCIsIkFycmF5IiwiZnJvbSIsInRvU3RyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJpc0NhbGxhYmxlIiwiZm4iLCJjYWxsIiwidG9JbnRlZ2VyIiwidmFsdWUiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsImlzRmluaXRlIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibWF4U2FmZUludGVnZXIiLCJwb3ciLCJ0b0xlbmd0aCIsImxlbiIsIm1pbiIsIm1heCIsImFycmF5TGlrZSIsIkMiLCJpdGVtcyIsIlR5cGVFcnJvciIsIm1hcEZuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiVCIsIkEiLCJrIiwia1ZhbHVlIiwiU2xpZGVyIiwiZWxlbWVudCIsImR1cmF0aW9uIiwiRGlzcGxheWVkU2xpZGUiLCJzbGlkZXIiLCJsaXN0Iiwic2xpZGVXaWR0aCIsImRvdHMiLCJzZWxlY3RlZERvdCIsImlzRGlzYWJsZWQiLCJzdHlsZSIsIm1hcmdpbkxlZnQiLCJoaWdobGlnaHQiLCJpdGVtIiwiY2hpbGRyZW4iLCJhbmltYXRlIiwidGltaW5nIiwiZHJhdyIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0aW1lIiwidGltZUZyYWN0aW9uIiwicHJvZ3Jlc3MiLCJtb3ZlUmlnaHQiLCJtdWx0aXBsaWVyIiwicHJldmlvdXMiLCJtb3ZlTGVmdCIsInRhZ05hbWUiLCJuZXh0IiwiaW5kZXhPZiIsImNhcm91c2VsIiwic2hvd0hpZGVCb3R0b21Cb3giLCJib3R0b21Cb3giLCJidXR0b25P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LENBQUN6RSxTQUFWLENBQW9CQyxNQUFwQixDQUEyQixvQkFBM0I7QUFDRCxLQUhEO0FBSUQsR0FSRDtBQVNELENBbE5EIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIC8qIE1vZGFsICovXHJcbiAgKGZ1bmN0aW9uIHNob3dIaWRlTW9kYWwoKSB7XHJcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSBib2R5LnF1ZXJ5U2VsZWN0b3IoXCIudHJpZ2dlclwiKTtcclxuICAgIGNvbnN0IG1vZGFsID0gYm9keS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJnXCIpO1xyXG4gICAgY29uc3QgY2xvc2UgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICBcclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWwtYmdfb3BlblwiKTtcclxuICAgICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiYm9keV9maXhlZFwiKTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBtb2RhbCkge1xyXG4gICAgICAgIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbC1iZ19vcGVuXCIpO1xyXG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImJvZHlfZml4ZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIFxyXG4gICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWwtYmdfb3BlblwiKTtcclxuICAgICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiYm9keV9maXhlZFwiKTtcclxuICAgIH0pO1xyXG4gIH0pKCk7XHJcblxyXG4gIC8qIFBvbHlmaWxsIHRoZSBBcnJheS5mcm9tKCkgKi9cclxuICBpZiAoIUFycmF5LmZyb20pIHtcclxuICAgIEFycmF5LmZyb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xyXG4gICAgICB2YXIgaXNDYWxsYWJsZSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgfHwgdG9TdHIuY2FsbChmbikgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciB0b0ludGVnZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgbnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gMDsgfVxyXG4gICAgICAgIGlmIChudW1iZXIgPT09IDAgfHwgIWlzRmluaXRlKG51bWJlcikpIHsgcmV0dXJuIG51bWJlcjsgfVxyXG4gICAgICAgIHJldHVybiAobnVtYmVyID4gMCA/IDEgOiAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpO1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG4gICAgICB2YXIgdG9MZW5ndGggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgbGVuID0gdG9JbnRlZ2VyKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobGVuLCAwKSwgbWF4U2FmZUludGVnZXIpO1xyXG4gICAgICB9O1xyXG4gIFxyXG4gICAgICAvLyBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBmcm9tIG1ldGhvZCBpcyAxLlxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gZnJvbShhcnJheUxpa2UvKiwgbWFwRm4sIHRoaXNBcmcgKi8pIHtcclxuICAgICAgICAvLyAxLiBMZXQgQyBiZSB0aGUgdGhpcyB2YWx1ZS5cclxuICAgICAgICB2YXIgQyA9IHRoaXM7XHJcbiAgXHJcbiAgICAgICAgLy8gMi4gTGV0IGl0ZW1zIGJlIFRvT2JqZWN0KGFycmF5TGlrZSkuXHJcbiAgICAgICAgdmFyIGl0ZW1zID0gT2JqZWN0KGFycmF5TGlrZSk7XHJcbiAgXHJcbiAgICAgICAgLy8gMy4gUmV0dXJuSWZBYnJ1cHQoaXRlbXMpLlxyXG4gICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkuZnJvbSByZXF1aXJlcyBhbiBhcnJheS1saWtlIG9iamVjdCAtIG5vdCBudWxsIG9yIHVuZGVmaW5lZCcpO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICAvLyA0LiBJZiBtYXBmbiBpcyB1bmRlZmluZWQsIHRoZW4gbGV0IG1hcHBpbmcgYmUgZmFsc2UuXHJcbiAgICAgICAgdmFyIG1hcEZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgVDtcclxuICAgICAgICBpZiAodHlwZW9mIG1hcEZuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgLy8gNS4gZWxzZVxyXG4gICAgICAgICAgLy8gNS4gYSBJZiBJc0NhbGxhYmxlKG1hcGZuKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxyXG4gICAgICAgICAgaWYgKCFpc0NhbGxhYmxlKG1hcEZuKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5mcm9tOiB3aGVuIHByb3ZpZGVkLCB0aGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgLy8gNS4gYi4gSWYgdGhpc0FyZyB3YXMgc3VwcGxpZWQsIGxldCBUIGJlIHRoaXNBcmc7IGVsc2UgbGV0IFQgYmUgdW5kZWZpbmVkLlxyXG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgIFQgPSBhcmd1bWVudHNbMl07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIC8vIDEwLiBMZXQgbGVuVmFsdWUgYmUgR2V0KGl0ZW1zLCBcImxlbmd0aFwiKS5cclxuICAgICAgICAvLyAxMS4gTGV0IGxlbiBiZSBUb0xlbmd0aChsZW5WYWx1ZSkuXHJcbiAgICAgICAgdmFyIGxlbiA9IHRvTGVuZ3RoKGl0ZW1zLmxlbmd0aCk7XHJcbiAgXHJcbiAgICAgICAgLy8gMTMuIElmIElzQ29uc3RydWN0b3IoQykgaXMgdHJ1ZSwgdGhlblxyXG4gICAgICAgIC8vIDEzLiBhLiBMZXQgQSBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kXHJcbiAgICAgICAgLy8gb2YgQyB3aXRoIGFuIGFyZ3VtZW50IGxpc3QgY29udGFpbmluZyB0aGUgc2luZ2xlIGl0ZW0gbGVuLlxyXG4gICAgICAgIC8vIDE0LiBhLiBFbHNlLCBMZXQgQSBiZSBBcnJheUNyZWF0ZShsZW4pLlxyXG4gICAgICAgIHZhciBBID0gaXNDYWxsYWJsZShDKSA/IE9iamVjdChuZXcgQyhsZW4pKSA6IG5ldyBBcnJheShsZW4pO1xyXG4gIFxyXG4gICAgICAgIC8vIDE2LiBMZXQgayBiZSAwLlxyXG4gICAgICAgIHZhciBrID0gMDtcclxuICAgICAgICAvLyAxNy4gUmVwZWF0LCB3aGlsZSBrIDwgbGVu4oCmIChhbHNvIHN0ZXBzIGEgLSBoKVxyXG4gICAgICAgIHZhciBrVmFsdWU7XHJcbiAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcclxuICAgICAgICAgIGtWYWx1ZSA9IGl0ZW1zW2tdO1xyXG4gICAgICAgICAgaWYgKG1hcEZuKSB7XHJcbiAgICAgICAgICAgIEFba10gPSB0eXBlb2YgVCA9PT0gJ3VuZGVmaW5lZCcgPyBtYXBGbihrVmFsdWUsIGspIDogbWFwRm4uY2FsbChULCBrVmFsdWUsIGspO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgQVtrXSA9IGtWYWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGsgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gMTguIExldCBwdXRTdGF0dXMgYmUgUHV0KEEsIFwibGVuZ3RoXCIsIGxlbiwgdHJ1ZSkuXHJcbiAgICAgICAgQS5sZW5ndGggPSBsZW47XHJcbiAgICAgICAgLy8gMjAuIFJldHVybiBBLlxyXG4gICAgICAgIHJldHVybiBBO1xyXG4gICAgICB9O1xyXG4gICAgfSgpKTtcclxuICB9XHJcblxyXG4gIC8qIFNsaWRlciAqL1xyXG4gIGZ1bmN0aW9uIFNsaWRlcihlbGVtZW50LCBkdXJhdGlvbiwgRGlzcGxheWVkU2xpZGUpIHtcclxuICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCksXHJcbiAgICAgIGxpc3QgPSBzbGlkZXIucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2xpc3RcIiksXHJcbiAgICAgIHNsaWRlV2lkdGggPSAtMTAwLFxyXG4gICAgICBkb3RzID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19kb3RzXCIpO1xyXG4gIFxyXG4gICAgbGV0IHNlbGVjdGVkRG90LFxyXG4gICAgICBpc0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgXHJcbiAgICBsaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHsgKERpc3BsYXllZFNsaWRlIC0gMSkgKiBzbGlkZVdpZHRoIH12d2A7XHJcbiAgXHJcbiAgICBmdW5jdGlvbiBoaWdobGlnaHQoaXRlbSkge1xyXG4gICAgICBpZiAoc2VsZWN0ZWREb3QpIHtcclxuICAgICAgICBzZWxlY3RlZERvdC5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGVyX19kb3RfYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIHNlbGVjdGVkRG90ID0gaXRlbTtcclxuICAgICAgc2VsZWN0ZWREb3QuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlcl9fZG90X2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICBcclxuICAgIGhpZ2hsaWdodChkb3RzLmNoaWxkcmVuW0Rpc3BsYXllZFNsaWRlIC0gMV0pO1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZSh7ZHVyYXRpb24gPSAyNTAsIHRpbWluZywgZHJhd30pIHtcclxuICAgICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICBcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGFuaW1hdGUodGltZSkge1xyXG4gICAgICAgIGxldCB0aW1lRnJhY3Rpb24gPSAodGltZSAtIHN0YXJ0KSAvIGR1cmF0aW9uO1xyXG4gICAgICAgIGlmICh0aW1lRnJhY3Rpb24gPiAxKSB0aW1lRnJhY3Rpb24gPSAxO1xyXG4gIFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gdGltaW5nKHRpbWVGcmFjdGlvbik7XHJcbiAgXHJcbiAgICAgICAgZHJhdyhwcm9ncmVzcyk7XHJcbiAgXHJcbiAgICAgICAgaWYgKHRpbWVGcmFjdGlvbiA8IDEpIHtcclxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXNEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBmdW5jdGlvbiBtb3ZlUmlnaHQobXVsdGlwbGllciwgcHJldmlvdXMpIHtcclxuICAgICAgYW5pbWF0ZSh7XHJcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgIHRpbWluZyh0aW1lRnJhY3Rpb24pIHtcclxuICAgICAgICAgIHJldHVybiB0aW1lRnJhY3Rpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmF3KHByb2dyZXNzKSB7XHJcbiAgICAgICAgICBsaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHsgKCBwcm9ncmVzcyAqIChtdWx0aXBsaWVyICogc2xpZGVXaWR0aCkgKSArIChwcmV2aW91cyAqIHNsaWRlV2lkdGgpIH12d2A7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIG1vdmVMZWZ0KG11bHRpcGxpZXIsIHByZXZpb3VzKSB7XHJcbiAgICAgIGFuaW1hdGUoe1xyXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICB0aW1pbmcodGltZUZyYWN0aW9uKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGltZUZyYWN0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhdyhwcm9ncmVzcykge1xyXG4gICAgICAgICAgbGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7ICggcHJvZ3Jlc3MgKiAobXVsdGlwbGllciAqIHNsaWRlV2lkdGgpICkgKyAocHJldmlvdXMgKiBzbGlkZVdpZHRoKSB9dndgO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkb3RzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gIFxyXG4gICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgIT09IFwiTElcIikgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICBpZiAodGFyZ2V0ID09PSBzZWxlY3RlZERvdCkgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICBpZiAoaXNEaXNhYmxlZCkgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICBpc0Rpc2FibGVkID0gdHJ1ZTtcclxuICBcclxuICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmZyb20oZG90cy5jaGlsZHJlbikuaW5kZXhPZih0YXJnZXQpO1xyXG4gICAgICBjb25zdCBwcmV2aW91cyA9IEFycmF5LmZyb20oZG90cy5jaGlsZHJlbikuaW5kZXhPZihzZWxlY3RlZERvdCk7XHJcbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBuZXh0IC0gcHJldmlvdXM7XHJcbiAgXHJcbiAgICAgIGlmIChtdWx0aXBsaWVyID4gMCkge1xyXG4gICAgICAgIG1vdmVMZWZ0KG11bHRpcGxpZXIsIHByZXZpb3VzKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobXVsdGlwbGllciA8IDApIHtcclxuICAgICAgICBtb3ZlUmlnaHQobXVsdGlwbGllciwgcHJldmlvdXMpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGhpZ2hsaWdodCh0YXJnZXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNvbnN0IGNhcm91c2VsID0gbmV3IFNsaWRlcihcIi5zbGlkZXJcIiwgNTAwLCAyKTtcclxuXHJcbiAgLyogQm90dG9tIGJveCAqL1xyXG4gIChmdW5jdGlvbiBzaG93SGlkZUJvdHRvbUJveCgpIHtcclxuICAgIGNvbnN0IGJvdHRvbUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm90dG9tLWJveFwiKTtcclxuICAgIGNvbnN0IGJ1dHRvbk9wZW5Cb3ggPSBib3R0b21Cb3gucXVlcnlTZWxlY3RvcihcIi5ib3R0b20tYm94X19idXR0b25cIik7XHJcbiAgXHJcbiAgICBidXR0b25PcGVuQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGJ1dHRvbk9wZW5Cb3guZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnRvZ2dsZShcImJvdHRvbS1ib3hfX2ljb24tYXJyb3dfZG93blwiKTtcclxuICAgICAgYm90dG9tQm94LmNsYXNzTGlzdC50b2dnbGUoXCJib3R0b20tYm94X3Zpc2libGVcIilcclxuICAgIH0pO1xyXG4gIH0pKCk7XHJcbn0pOyJdLCJmaWxlIjoiaW5kZXguanMifQ==
